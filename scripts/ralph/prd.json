{
  "project": "Call Center Intelligence",
  "branchName": "ralph/call-center-intelligence",
  "description": "Build complete Call Center Intelligence Control Tower - a Next.js dashboard for customer service operations",
  "userStories": [
    {
      "id": "PRD-01",
      "title": "Project Setup",
      "description": "Initialize Next.js project with SQLite database, schema design, and seed data",
      "acceptanceCriteria": [
        "npm run dev starts the application",
        "npm run seed populates database with ~2k cases",
        "Database queries return expected data",
        "Base layout renders with placeholders",
        "npm run typecheck passes"
      ],
      "verification": [
        "npm run typecheck",
        "npm run dev -- --port 3001 &",
        "sleep 5 && curl -s http://localhost:3001 | head -20",
        "npm run seed"
      ],
      "priority": 1,
      "passes": false,
      "taskFile": "tasks/tasks-01-project-setup.md",
      "notes": ""
    },
    {
      "id": "PRD-02",
      "title": "Cases Module",
      "description": "Case list and detail views with filtering, badges, and share/escalate",
      "acceptanceCriteria": [
        "Cases list loads with all columns visible",
        "Filters work and update URL",
        "Urgent and Needs Review badges display correctly",
        "Case detail page shows all information",
        "AI summary renders with three sections",
        "Share modal allows recipient selection and note",
        "Escalate marks case as escalated",
        "npm run typecheck passes",
        "Verify in browser using cursor-ide-browser MCP"
      ],
      "verification": [
        "npm run typecheck",
        "curl -s http://localhost:3000/api/cases | jq '.cases | length'",
        "curl -s http://localhost:3000/api/cases/1 | jq '.summary'"
      ],
      "priority": 2,
      "passes": false,
      "taskFile": "tasks/tasks-02-cases-module.md",
      "notes": ""
    },
    {
      "id": "PRD-03",
      "title": "Alerts Module",
      "description": "Alert system with different types, list view, and sharing/escalation workflows",
      "acceptanceCriteria": [
        "Alert list shows all alert types",
        "Each alert card displays required information",
        "Spike alerts show percentage increase",
        "Threshold alerts show threshold vs actual",
        "Sample cases link to case detail",
        "Share modal works",
        "Escalated items appear in Management Inbox",
        "Share audit trail is recorded",
        "npm run typecheck passes",
        "Verify in browser using cursor-ide-browser MCP"
      ],
      "verification": [
        "npm run typecheck",
        "curl -s http://localhost:3000/api/alerts | jq '.alerts | length'",
        "curl -s http://localhost:3000/api/inbox | jq '.items | length'"
      ],
      "priority": 3,
      "passes": false,
      "taskFile": "tasks/tasks-03-alerts-module.md",
      "notes": ""
    },
    {
      "id": "PRD-04",
      "title": "Live Feed",
      "description": "Home page with Today Feed showing alerts, trending, highlights plus Pulse sidebar",
      "acceptanceCriteria": [
        "Home page shows Today Feed with mixed card types",
        "At least 2 alert cards appear in feed",
        "At least 2 trending cards appear in feed",
        "Highlight cards show meaningful summaries",
        "Pulse sidebar displays all KPIs",
        "Quick filters update feed instantly",
        "Clicking cards navigates to correct drilldown",
        "Feed is deterministic with seed data",
        "npm run typecheck passes",
        "Verify in browser using cursor-ide-browser MCP"
      ],
      "verification": [
        "npm run typecheck",
        "curl -s http://localhost:3000/api/feed | jq '.items | length'",
        "curl -s http://localhost:3000/api/pulse | jq '.kpis'"
      ],
      "priority": 4,
      "passes": false,
      "taskFile": "tasks/tasks-04-live-feed.md",
      "notes": ""
    },
    {
      "id": "PRD-05",
      "title": "Trending & Prediction",
      "description": "Trending topic computation, trend scoring, and predicted risk cards",
      "acceptanceCriteria": [
        "Top 5 trending topics display with scores",
        "Each topic shows impacted BUs and example cases",
        "Trend scores reflect meaningful changes",
        "At least 3 predicted risk cards appear",
        "Predicted risks have reasonable explanations",
        "Time window toggle works (24h/7d)",
        "Trend chart visualizes data correctly",
        "npm run typecheck passes",
        "Verify in browser using cursor-ide-browser MCP"
      ],
      "verification": [
        "npm run typecheck",
        "curl -s http://localhost:3000/api/trending | jq '.topics | length'",
        "curl -s http://localhost:3000/api/predictions | jq '.predictions | length'"
      ],
      "priority": 5,
      "passes": false,
      "taskFile": "tasks/tasks-05-trending-prediction.md",
      "notes": ""
    },
    {
      "id": "PRD-06",
      "title": "Semantic Search",
      "description": "Global search bar with natural language query support and suggested filters",
      "acceptanceCriteria": [
        "Search bar visible on all pages",
        "Natural language queries are parsed correctly",
        "'urgent refund cases last week' returns relevant results",
        "Suggested filters appear based on query",
        "Results show relevance ranking",
        "Search completes in < 2 seconds",
        "Keyboard shortcut (Cmd+K) opens search",
        "npm run typecheck passes",
        "Verify in browser using cursor-ide-browser MCP"
      ],
      "verification": [
        "npm run typecheck",
        "curl -s 'http://localhost:3000/api/search?q=urgent+refund' | jq '.results | length'",
        "curl -s 'http://localhost:3000/api/search?q=delivery+delay+Food' | jq '.suggestedFilters'"
      ],
      "priority": 6,
      "passes": false,
      "taskFile": "tasks/tasks-06-semantic-search.md",
      "notes": ""
    },
    {
      "id": "PRD-07",
      "title": "Chat Assistant",
      "description": "Chat drawer with AI assistant that responds to questions and applies filters",
      "acceptanceCriteria": [
        "Chat drawer opens from floating button",
        "Messages display correctly (user/assistant)",
        "'What's happening today?' returns summary",
        "'Show trends' returns trending topics",
        "'Find cases about refund' returns matching cases",
        "'Filter to BU Food' applies filter in main UI",
        "Response cards include action buttons",
        "Actions work (navigate, apply filter)",
        "npm run typecheck passes",
        "Verify in browser using cursor-ide-browser MCP"
      ],
      "verification": [
        "npm run typecheck",
        "curl -s -X POST http://localhost:3000/api/chat -H 'Content-Type: application/json' -d '{\"message\":\"What is happening today?\"}' | jq '.intent'"
      ],
      "priority": 7,
      "passes": false,
      "taskFile": "tasks/tasks-07-chat-assistant.md",
      "notes": ""
    },
    {
      "id": "PRD-08",
      "title": "Upload & Export",
      "description": "CSV upload for new cases and export functionality",
      "acceptanceCriteria": [
        "CSV upload accepts valid files",
        "Invalid rows show detailed errors",
        "Error report includes row, column, reason, fix",
        "Successful upload creates feed item",
        "Alerts/trending recompute after upload",
        "Export produces valid CSV file",
        "Export produces valid XLSX file",
        "Export respects current filters",
        "npm run typecheck passes",
        "Verify in browser using cursor-ide-browser MCP"
      ],
      "verification": [
        "npm run typecheck",
        "curl -s http://localhost:3000/api/uploads | jq '.uploads | length'",
        "curl -s 'http://localhost:3000/api/export?format=csv' -o /tmp/export.csv && wc -l /tmp/export.csv"
      ],
      "priority": 8,
      "passes": false,
      "taskFile": "tasks/tasks-08-upload-export.md",
      "notes": ""
    },
    {
      "id": "PRD-09",
      "title": "Real-Time Polish",
      "description": "Real-time feel with polling, timestamps, and demo mode with mock event generation",
      "acceptanceCriteria": [
        "Feed polls every 15 seconds (configurable)",
        "'Updated X seconds ago' shows correctly",
        "New items appear during demo session",
        "Demo mode toggle works",
        "Mock events are realistic",
        "Visual feedback for new items",
        "No polling when tab is hidden",
        "SSE works as alternative (optional)",
        "npm run typecheck passes",
        "npm test passes",
        "Verify in browser using cursor-ide-browser MCP"
      ],
      "verification": [
        "npm run typecheck",
        "npm test",
        "curl -s http://localhost:3000/api/events -H 'Accept: text/event-stream' --max-time 5 || true"
      ],
      "priority": 9,
      "passes": false,
      "taskFile": "tasks/tasks-09-realtime-polish.md",
      "notes": ""
    }
  ]
}
